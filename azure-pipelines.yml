trigger:
  - main

resources:
  repositories:
    - repository: manga-torremo-pipeline-azure
      endpoint: manganellidev
      type: github
      name: manganellidev/manga-torremo-pipeline-azure

extends:
  template: sdp-pipeline.yml@manga-torremo-pipeline-azure
  parameters:
    teamIdentifier: northstar
    appName: train
    artifactVersion: 1.2.334

    # prettier-ignore
    rings:
      - targetRegion: "int"              # Required: check available regions
        previousRegion: "eu"           # Required: none or previous region
        autoPromote: true                # Optional: default false
        bakeTimeInMinutes: 1             # Optional: default 1
        skipBakeTime: false              # Optional: default false
        skipPostDeployValidation: true   # Optional: default false
      - targetRegion: "eu"
        previousRegion: "int"
        autoPromote: true
        bakeTimeInMinutes: 1
        skipBakeTime: false
        skipPostDeployValidation: true
      # - name: "ring_2"
      #   skip: false
      #   autoPromote: true
      #   skipDynatraceSmokeTest: true
      #   targetRegion: "us"
      #   previousRegion: "eu"
      #   bakeTimeInMinutes: 1
      # - name: "ring_3"
      #   skip: false
      #   autoPromote: true
      #   skipDynatraceSmokeTest: true
      #   targetRegion: "apj"
      #   previousRegion: "us"
      #   bakeTimeInMinutes: 1

    # # Ring 0
    # skipRing0: false
    # autoPromoteRing0: true
    # dynatraceSmokeTestRing0: true
    # targetRegionRing0: int
    # bakeTimeInMinutesRing0: 1

    # # Ring 1
    # skipRing1: false
    # autoPromoteRing1: true
    # dynatraceSmokeTestRing1: true
    # targetRegionRing1: eu
    # bakeTimeInMinutesRing1: 1

    # # Ring 2
    # skipRing2: false
    # autoPromoteRing2: true
    # dynatraceSmokeTestRing2: true
    # targetRegionRing2: us
    # bakeTimeInMinutesRing2: 1

    # # Ring 3
    # skipRing3: false
    # autoPromoteRing3: true
    # dynatraceSmokeTestRing3: true
    # targetRegionRing3: apj
